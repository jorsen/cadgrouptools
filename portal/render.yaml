
services:
  - type: web
    name: cadgroup-tools-portal
    env: node
    plan: starter
    nodeVersion: 18
    buildCommand: npm install && npm run build
    startCommand: npm start
    publishDir: .next
    healthCheckPath: /api/health/push
    features:
      - websockets
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: MONGODB_URI
        value: mongodb+srv://marketing:wU8RzIIr6kq6I0@cadtools.dvvdsg1.mongodb.net/?appName=cadtools
      - key: DB_NAME
        value: cadgroupmgt
      - key: NEXTAUTH_URL
        sync: false
      - key: NEXTAUTH_SECRET
        generateValue: true
      - key: NEXT_PUBLIC_VAPID_PUBLIC_KEY
        value: BB7T5l8cQ-7CN-1KHWToSMYcZJaBTlh3yId8FkaVLuW87KQ5YWW0F0sAKPVHqltE2_p60jXOSbIBsRZn4YyMyHU
      - key: VAPID_PRIVATE_KEY
        sync: false
      - key: VAPID_SUBJECT
        value: mailto:admin@cadgroupmgt.com
      - key: SENDGRID_API_KEY
        sync: false
      - key: SENDGRID_FROM_EMAIL
        value: notifications@cadgroupmgt.com
      - key: SENDGRID_FROM_NAME
        value: CADGroup Tools Portal
      - key: NOTIFICATION_BATCH_SIZE
        value: "100"
      - key: NOTIFICATION_RETRY_ATTEMPTS
        value: "3"
      - key: NOTIFICATION_TIMEOUT_MS
        value: "5000"
      - key: NOTIFICATION_CLEANUP_DAYS
        value: "30"
      - key: NOTIFICATION_RATE_LIMIT_PER_USER
        value: "50"
      - key: NOTIFICATION_RATE_LIMIT_WINDOW_MS
        value: "900000"
      - key: NEXT_PUBLIC_WEBSOCKET_URL
        sync: false
      - key: WEBSOCKET_ENABLED
        value: "true"
      - key: WEBSOCKET_PING_INTERVAL
        value: "25000"
      - key: WEBSOCKET_PING_TIMEOUT
        value: "60000"
      - key: HOSTNAME
        value: "0.0.0.0"
      - key: SEMRUSH_API_KEY
        sync: false
      - key: ANTHROPIC_API_KEY
        sync: false
      - key: MANUS_API_KEY
        sync: false
      - key: MANUS_BASE_URL
        value: https://api.manus.ai/v1
      - key: MANUS_WEBHOOK_SECRET
        sync: false
      - key: GHL_API_KEY
        sync: false
      - key: GHL_LOCATION_ID
        value: 62kZ0CQqMotRWvdIjMZS
      - key: GHL_WEBHOOK_SECRET
        sync: false
      - key: GHL_ESYSTEMS_API_KEY
        sync: false
      - key: GHL_ESYSTEMS_LOCATION_ID
        value: dXPpkZ3hX5PCKayZrLsI
      - key: GHL_ESYSTEMS_WEBHOOK_SECRET
        sync: false
      - key: SUPABASE_URL
        value: https://cpoeuapfcbwymoftfmsf.supabase.co
      - key: SUPABASE_SERVICE_ROLE
        sync: false
      - key: SUPABASE_BUCKET
        value: cadgroup-uploads
      - key: NEXT_PUBLIC_SUPABASE_URL
        value: https://cpoeuapfcbwymoftfmsf.supabase.co
      - key: NEXT_PUBLIC_SUPABASE_ANON_KEY
        value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwb2V1YXBmY2J3eW1vZnRmbXNmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNDU1NTgsImV4cCI6MjA3MDcyMTU1OH0.IpF_QibaiYPca6r8OGVcENXZN665v9RUDuOvuTYa_aw
